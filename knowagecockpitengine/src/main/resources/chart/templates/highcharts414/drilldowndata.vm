#set($dataFields=$data.metaData.fields) ## columns of data table
#set($dataColumnsMapper={})
#foreach ($dataField in $dataFields) ## conversion column name to internal column name
#if($dataField.class.name == 'java.util.LinkedHashMap')
#set($workAroundNoPrint=$dataColumnsMapper.put($dataField.header.toLowerCase().trim() , $dataField.name))
#end
#end
#set($rows=$data.rows) ## data in table rows
#set($categorieColumnsMapped=$dataColumnsMapper.get($drilldownCategory.toLowerCase().trim()))
	#set($name= "name")
	#set($col= "column")
#if($chart.CHART.VALUES.SERIE.class.name == 'java.util.ArrayList')
#foreach($serie in $chart.CHART.VALUES.SERIE)
	#if($serie.get($name) == $drilldownSerie)
	#set($mainSerieName =$serie.get($col))
	#end
#end
#elseif($chart.CHART.VALUES.SERIE.class.name == 'java.util.LinkedHashMap')
	#if($chart.CHART.VALUES.SERIE.name == $drilldownSerie)
		#set($mainSerie = $chart.CHART.VALUES.SERIE)
		#set($mainSerieName = $mainSerie.column)
	#end
#else
#set($mainSerieName = $drilldownSerie)
#end

#if(($chart.groupCategories =='true' || $chart.groupSeriesCateg =='true') && $chart.isCockpitEngine == 'false')
#set($categorieColumns = $chart.CHART.VALUES.CATEGORY.get(0))
#else
#set($categorieColumns = $chart.CHART.VALUES.CATEGORY) ## metadata related to categories
#end
#set($xAxisMap = $datasettransformer.getXAxisMap($categorieColumns, $chart.CHART.categoryDate))
#set($isDateTime = false)
#if($chart.CHART.dateTime && $chart.CHART.dateTime=="true")
	#if($chart.CHART.categoryDate)
		#set($categoryDate = $chart.CHART.categoryDate)
		#if($chart.CHART.categoryDate==$drilldownCategoryName)
			#set($isDateTime = true)
		#end
	#else
		#set($isDateTime = true)
	#end
#end
#foreach($a in $xAxisMap)
#if($a.name==$drilldownCategoryName.replaceAll(" ",""))
#set($indexAxis = $a.id)
#end
#end
#set($serieColumnsMapped=$dataColumnsMapper.get($mainSerieName.toLowerCase()))

{
	name:	'$selectedCategory',
	xAxis: $indexAxis,
	#if($drilldownCategoryName != '')
	#set ($category=$drilldownCategoryName.replaceAll(" ",""))
	#else
	#set ($category=$drilldownCategory)
	#end
	category: '$category',
	
	serieName:'$drilldownSerie',
     pointRange: 1,
	data: [
#foreach($row in $rows)

#set ($serieValue=$row.get($serieColumnsMapped))
#set ($serieName= $row.get($categorieColumnsMapped))
		{
			drilldown: $enableNextDrilldown,
			y: $serieValue,
			name: '$serieName',
			#if($category == $categoryDate)
				#if($serieName.length()>10)
				#set($date = $serieName.replace(" " , "-").replace(":" , "-").replace(":" , "-").replace("." , "-").split("-"))
				#set($hour= $date.get(3))
				#set($min= $date.get(4))
				#set($sec= $date.get(5))
				#set($milisec= $date.get(6))
				#else
				#set($date = $serieName.split("-"))
				#end
			
				#if($date.get(0).length()>2)
				#set($day = $date.get(2))
				#set($year= $date.get(0))
				#else
				#set($day = $date.get(0))
				#set($year= $date.get(2))
				#end
				#set($month = $Integer.parseInt($date.get(1)))
				#set($month = $month - 1)
		
			#if($serieName.length()>10)
			x:	Date.UTC($year, $month, $day, $hour, $min, $sec, $milisec),	
			#else 
			x:	Date.UTC($year, $month, $day),	
			
			#end
			#end
		
		},
#end
	],

}