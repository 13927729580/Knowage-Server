<div layout="row" class="qbeCustomTable">
   	<div ng-repeat="n in ngModel | orderBy: 'order' track by $index" ng-if="!n.hidden" class="qbeCustomColumn" layout-column>
   		<div class="qbeCustomTopColor" ng-style="{'background-color' : n.color}"><md-tooltip md-direction="top">{{n.entity}}</md-tooltip></div>
   		<md-toolbar>
   		<div class="md-toolbar-tools secondaryToolbar" >
   		<md-icon class="fa fa-sort"></md-icon>
   			<h2>{{n.name}}
   			<md-tooltip md-direction="top">{{n.name}}</md-tooltip>
   			</h2> 
   		<span flex></span>
   		<md-menu>			      
      	<md-button 	aria-label="query settings menu" class="md-icon-button" ng-click="openMenu($mdMenu.open, $event)">
      		<md-tooltip md-direction="top">column settings</md-tooltip>
        	<md-icon md-menu-origin class="fa fa-cog"></md-icon>
      	</md-button>
      	<md-menu-content class="qbeMenuContent">
	      
       		<md-menu-item>
          		<md-checkbox ng-model="n.hidden" class="menuCheckbox" aria-label="hide column">
            hide field
          </md-checkbox>
       		</md-menu-item>
       		<md-menu-item>
         			<md-checkbox ng-model="data.cb2" aria-label="Checkbox 1">
           use as attribute
          </md-checkbox>
       		</md-menu-item>
       		<md-menu-item>
         			<md-button ng-click="showStructureDetails('categoriesAxisDetails',categoriesAxis.alias)">
						<md-icon class="fa fa-sliders" style="display:inline"></md-icon>
            		<span>ranges</span>
          		</md-button>
       		</md-menu-item>
       		<md-menu-item>
       		  
         			<md-menu>		
         			<md-button ng-mouseenter="openMenu($mdOpenMenu, $event)">
						<md-icon class="fa fa-calculator" style="display:inline"></md-icon>
            		<span>FUNCTION</span>
          		</md-button>	      
      	<md-menu-content class="qbeMenuContent">
	      
	      	<md-menu-item>
          		<md-button ng-click="applyFuntion('none',n.id,n.entity)">
            		<span>none</span>
            		</md-button>
       		</md-menu-item>
       		
       		<md-menu-item>
          		<md-button ng-click="applyFuntion('sum',n.id,n.entity)">
            		<span>SUM</span>
            		</md-button>
       		</md-menu-item>
       		
       		<md-menu-item>
       			<md-button ng-click="applyFuntion('min',n.id,n.entity)">
            		<span>MIN</span></md-button>
       		</md-menu-item>
       		
       		<md-menu-item>
       			<md-button ng-click="applyFuntion('max',n.id,n.entity)">
            		<span>MAX</span>
            	</md-button>
       		</md-menu-item>    
       		
       		<md-menu-item>
          		<md-button ng-click="applyFuntion('avg',n.id,n.entity)">
            		<span>avg</span>
            	</md-button>
       		</md-menu-item>
       		
       		<md-menu-item>
          		<md-button ng-click="applyFuntion('count',n.id,n.entity)">
            		<span>count</span>
            	</md-button>
       		</md-menu-item>
       		
       		<md-menu-item>
          		<md-button ng-click="applyFuntion('count_distinct',n.id,n.entity)">
            		<span>dist</span>
            	</md-button>
       		</md-menu-item>      		
            		
       		</md-menu-content>
       		</md-menu>
       		</md-menu-item>
       		<md-menu-item>
       		  
         			<md-button ng-click="moveLeft(n.order, n)">
						<md-icon class="fa fa-angle-left" style="display:inline"></md-icon>
            		<span>move left</span>
          		</md-button>
       		</md-menu-item>
       		<md-menu-item>
         			<md-button ng-click="moveRight(n.order, n)">
						<md-icon class="fa fa-angle-right" style="display:inline"></md-icon>
            		<span>move right</span>
          		</md-button>
       		</md-menu-item>
        			        
	      </md-menu-content>
	      
    	</md-menu>
    	<md-button 	aria-label="query settings menu" class="md-icon-button" ng-click="removeColumn(n)">
    		<md-tooltip md-direction="top">delete column</md-tooltip>
        	<md-icon md-menu-origin class="fa fa-times"></md-icon>
      	</md-button>
   		</div>   		
    	</md-toolbar>
   	
   
   	<div ng-repeat="r in n.data track by $index" class="qbeCustomRow">{{r}}</div>
   	<div ng-repeat="f in n.filters track by $index" class="qbeCustomFooter">{{f}}</div>
   </div>
   
   <div></div>
</div>

