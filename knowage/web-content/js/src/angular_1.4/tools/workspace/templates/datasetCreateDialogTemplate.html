<md-dialog flex class="mdDialogDatasetWizard" ng-cloak>
  
	<md-toolbar>
      
		<div class="md-toolbar-tools">
      
			<h2>DATASET WIZARD</h2>
	         
			<span flex></span> 
	         
			<md-button 	class="" ng-click="toggleDWVBack()" ng-if="datasetWizardView>1" title="Go to the previous step"> BACK </md-button>
			
			<md-button 	class="" ng-click="toggleDWVNext()" 
						ng-disabled="nextOrSaveButtonCondition()"
						title="{{datasetWizStep1NextButtonTitle()}}"> 
				{{datasetWizardView==4 ? 'SAVE' : 'NEXT' }} 
			</md-button>
			
			<md-button class="" ng-click="closeDatasetCreateDialog()" title="Close the dialog"> CLOSE </md-button>
            
		</div>
      
	</md-toolbar>
   
	<md-content flex class="knowageGrey">
      
		<!-- CARD 1 (START) -->
		<!--<md-card ng-if="datasetWizardView==1">-->
        <div ng-if="datasetWizardView==1">
        
			<md-whiteframe flex layout="column" layout-margin class="md-whiteframe-5dp">
				
				<md-toolbar class="secondaryToolbar">
		         	<div class="md-toolbar-tools">
		           		<h2>LOAD FILE</h2>
		               	<span flex></span>
		            </div>
				</md-toolbar>
		         
				<md-content class="loadFilePadding">
		         	
					<form>
			               
						<div layout="row" layout-wrap>
			                  <div flex>
			                     <md-input-container class="small counter">
			                        <label>Category</label> 
			                        <md-select aria-label="aria-label" ng-model="category">
			                           <md-option 	ng-repeat="category in datasetCategoryType" 
			                           				ng-click="chooseCategory(category)"
			                           				value="{{category.VALUE_NM}}">
	                           				{{category.VALUE_NM}}
                           				</md-option>
			                        </md-select>
			                     </md-input-container>
			                  </div>
						</div>
			               
						<div flex=50 layout="row">
			                  <label class="checkboxPadding">Limit preview:</label> 
			                  <md-input-container class="small counter">
			                     <md-checkbox 	aria-label="Checkbox 1" 
			                     				ng-model="limitPreviewChecked" ng-checked="toggleLimitPreview()">
           						</md-checkbox>
			                  </md-input-container>
						</div>
			               
						<div layout="row" layout-wrap>
		                  	<label layout-align="center center" class="buttonLabel">{{translate.load("sbi.ds.wizard.selectFile")}}:</label>
		                  	<file-upload 	flex ng-model="fileObj" id="datasetFile" ng-click="fileChange();checkChange()" 
			                  				title="Browse for the XLS or CSV file"></file-upload>
		                  	<div class="uploadButton">
			                    <md-button 	ng-click="uploadFile()" class="md-raised" 
			                     			ng-disabled="!fileObj.fileName" title="{{datasetWizStep1UploadButtonTitle()}}">
	                     			UPLOAD
             					</md-button>
		                  	</div>
						</div>
			               
					</form>
		            
		       	</md-content>
		       	
	       	</md-whiteframe>
	       	
         
         	<!-- <md-whiteframe flex layout="column" layout-margin class="md-whiteframe-5dp md-whiteframe-5dp-rightPanelDocuments"> -->
         		
       		<md-whiteframe flex layout="column" layout-margin class="md-whiteframe-5dp threeCombosThreeNumFields">         		
         		
         		<div layout="row">								
			              
			        <!-- CSV file is uploaded --> 
					<div layout="row" flex ng-if="dataset.fileType=='CSV'">
		                 	
	                 	<div layout="row" layout-wrap flex=33>
	                  		<div flex=90 layout-align="center center">
	                     		<md-input-container class="small counter">
	                        		<label>Delimiter character</label> 
	                        		<md-select aria-label="aria-label" ng-model="dataset.csvDelimiter">
	                           			<md-option 	ng-repeat="csvDelimiterCharacterItem in csvDelimiterCharacterTypes" 
	                           						ng-click="chooseDelimiterCharacter(csvDelimiterCharacterItem)" 
	                           						value="{{csvDelimiterCharacterItem.name}}">
                          						{{csvDelimiterCharacterItem.name}}
                     						</md-option>
	                        		</md-select>
		                     	</md-input-container>
		                  	</div>
						</div>
	                 	
                		<div layout="row" layout-wrap flex=33>
	                  		<div flex=90 layout-align="center center">
	                     		<md-input-container class="small counter">
	                        		<label>Quote character</label> 
	                        		<md-select aria-label="aria-label" ng-model="dataset.csvQuote">
	                           			<md-option 	ng-repeat="csvQuoteCharacterItem in csvQuoteCharacterTypes" 
	                           						ng-click="chooseQuoteCharacter(csvQuoteCharacterItem)" 
	                           						value="{{csvQuoteCharacterItem.name}}">
                          						{{csvQuoteCharacterItem.name}}
                     						</md-option>
	                        		</md-select>
		                     	</md-input-container>
		                  	</div>
						</div>
						
						<div layout="row" layout-wrap flex=33>
	                  		<div flex=90 layout-align="center center">
	                     		<md-input-container class="small counter">
	                        		<label>Delimiter character</label> 
	                        		<md-select aria-label="aria-label" ng-model="dataset.csvEncoding">
	                           			<md-option 	ng-repeat="csvEncodingItem in csvEncodingTypes" 
	                           						ng-click="chooseEncoding(csvEncodingItem)" 
	                           						value="{{csvEncodingItem.name}}">
                          						{{csvEncodingItem.name}}
                     						</md-option>
	                        		</md-select>
		                     	</md-input-container>
		                  	</div>
						</div>
							
					</div>
					
					<!-- XLS file is uploaded -->
					<div layout="row" flex ng-if="dataset.fileType=='XLS'">
						
						<div layout="row" layout-wrap flex=33>
	                  		<div flex=90 layout-align="center center">
	                     		<md-input-container class="small counter">
	                        		<label>Skip rows</label> 
	                        		<input 	ng-model="dataset.skipRows" type="number" 
	                        				step="1" min="0" value="{{dataset.skipRows}}">
		                     	</md-input-container>
		                  	</div>
						</div>
	                 	
                		<div layout="row" layout-wrap flex=33>
	                  		<div flex=90 layout-align="center center">
	                     		<md-input-container class="small counter">
	                        		<label>Limit rows number</label> 
	                        		<input 	ng-model="dataset.limitRows" type="number" 
	                        				step="1" min="0" value="{{dataset.limitRows}}">
		                     	</md-input-container>
		                  	</div>
						</div>
						
						<div layout="row" layout-wrap flex=33>
	                  		<div flex=90 layout-align="center center">
	                     		<md-input-container class="small counter">
	                        		<label>Sheet number</label> 
	                        		<input 	ng-model="dataset.xslSheetNumber" type="number" 
	                        				step="1" min="1" value="{{dataset.xslSheetNumber}}">
		                     	</md-input-container>
		                  	</div>
						</div>
						
					</div>
						
				</div>					
				
       	 	</md-whiteframe>
       	 	
         </div>
		
		<!-- </md-card>CARD 1 (END) -->
      
		<!-- CARD 2 (START) -->
      	<md-card ng-if="datasetWizardView==2">
         
         	<md-toolbar class="secondaryToolbar">
            	<div class="md-toolbar-tools">
               	<h2>LOAD FILE &#10137; DEFINITION DATA</h2>
               	<span flex></span>
           	 	</div>
         	</md-toolbar>
         
         	<md-content flex class="loadFilePadding step2DefDataCardContent">
	            <form>
	               <dataset-wizard-meta></dataset-wizard-meta>
	            </form>
         	</md-content>
         
		</md-card>
      	<!-- CARD 2 (END) -->
     
      	<!-- CARD 3 (START) -->
      	<md-card ng-if="datasetWizardView==3">
      	
         	<md-toolbar class="secondaryToolbar">
	            <div class="md-toolbar-tools">
	               <h2>LOAD FILE &#10137; DEFINITION DATA &#10137; VALIDATION DATA</h2>
	               <span flex></span>
	            </div>
         	</md-toolbar>
         
         	<md-content flex class="loadFilePadding step3PreviewPanel">
	            
	            <form>
	               
	               <!-- VALIDATION DATA -->
	               	               
				    <md-content flex>
						
						<!-- 			    
				    	<md-toolbar class="documentBrowserToolbar secondaryToolbar">
							
							<div class="md-toolbar-tools" layout="row" layout-align="center center">
						   		
						   		<md-button class="md-fab md-mini" aria-label="backPagination" ng-click="getBackPreviewSet()">
				          			<md-icon class="fa fa-angle-double-left"></md-icon>				        		
				        		</md-button>
				        		
				        		<span flex></span>
				        		
				        		<div>{{startPreviewIndex+1 +'&nbsp-&nbsp'+ endPreviewIndex + '&nbsp/&nbsp'+totalItemsInPreview}} </div>
				        		
				        		<span flex></span>
				             	
				             	<md-button class="md-fab md-mini" aria-label="forwardPagination" ng-click="getNextPreviewSet()">
				          			<md-icon class="fa fa-angle-double-right"></md-icon>
				        		</md-button>
				        		
				    		</div>
				    		
				    	</md-toolbar>				    	 	
				    
				    	<br> 
				    	-->
				
				 		<md-content flex class="step3PreviewTable">
				 		
							<angular-table 
							            flex
							            style="position:absolute;"
							            ng-model="resultRowsStep2"
										columns="allHeadersForStep3Preview" 
										no-pagination=true
										show-search-bar=false>
							</angular-table>
						
				 		</md-content>
				 		
					</md-content>	
					               
	            </form>
	            
         	</md-content>      	
         	
      	</md-card>
     	<!-- CARD 3 (END) -->
     	
     	<!-- Validation status text: the validation state after going from the Step 2 to the Step 3 -->
      	<p 	ng-show="validationStatus && datasetWizardView==3" 
      		class="step3ValidationText {{validationStatus ? 'validStatusColor' : 'invalidStatusColor'}}">
      		{{validationStatus ? translate.load("sbi.ds.metadata.msgOK") : translate.load("sbi.ds.metadata.msgKO")}}
   		</p>
      	
      	<!-- CARD 4 (START) -->
      	<div ng-if="datasetWizardView==4">
        
			<md-whiteframe flex layout="column" layout-margin class="md-whiteframe-5dp">
				
				<md-toolbar class="secondaryToolbar">
		         	<div class="md-toolbar-tools">
		           		<h2>LOAD FILE</h2>
		               	<span flex></span>
		            </div>
				</md-toolbar>
		         
				<md-content class="loadFilePadding">
		         	
					<form name="formForSaving">
			               
						<div layout="row" layout-wrap>
			                  <div flex>
			                     <md-input-container class="md-block">
			                        <label>Name</label> 			                        
			                        <input type="text" ng-model="dataset.name">
		                         	<div  ng-messages="formForSaving.lbl.$error" ng-show="dataset.name==''">
				                        <div ng-messages="required">Please enter a value for this field.</div>
						          	</div>
			                     </md-input-container>
			                  </div>
						</div>
						
						<div layout="row" layout-wrap>
			                  <div flex>
			                     <md-input-container class="small counter">
			                        <label>Description</label> 
			                        <textarea rows="2" cols="50" ng-model="dataset.description" style="overflow:auto;auto-scroll:true"></textarea>
			                     </md-input-container>
			                  </div>
						</div>
						
			           	<div flex=50 layout="row">
	                  		<label class="checkboxPadding">Persist:</label> 
		                  		<md-input-container class="small counter">
		                     		<md-checkbox 	aria-label="Checkbox 2" 
			                     					ng-model="dataset.persist" ng-checked="">
									</md-checkbox>
		                  		</md-input-container>
						</div>
						
						<div layout="row" layout-wrap>
			                  <div flex>
			                     <md-input-container class="small counter">
			                        <label>Table name</label> 
			                        <input ng-model="dataset.tableName" ng-disabled="!dataset.persist">
			                        <div  ng-messages="formForSaving.lbl.$error" ng-show="dataset.persist && dataset.tableName==''">
				                        <div ng-messages="required">Please enter a value for this field.</div>
						          	</div>
			                     </md-input-container>
			                  </div>
						</div>
						
					</form>					
		            
		       	</md-content>
		       	
	       	</md-whiteframe>
         
         </div>
      	<!-- CARD 4 (END) -->
      
   </md-content>
   
</md-dialog>